"use strict";(self.webpackChunkinstagram_clone=self.webpackChunkinstagram_clone||[]).push([[453],{3453:function(e,t,r){r.r(t),r.d(t,{default:function(){return D}});var n=r(5861),a=r(885),s=r(7757),u=r.n(s),l=r(2791),c=r(1413),o=r(3504),i=r(83),m=r(6724),d=r(9329),f=function(){var e=(0,n.Z)(u().mark((function e(t){var r,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.PL)((0,m.hJ)(d.db,"users"));case 2:return r=e.sent,n=!0,r.forEach((function(e){e.data().emailAddress!==t||(n=!1)})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=f,b=function(){var e=(0,n.Z)(u().mark((function e(t){var r,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.PL)((0,m.hJ)(d.db,"users"));case 2:return r=e.sent,n=!0,r.forEach((function(e){e.data().username!==t||(n=!1)})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=b,p=function(e){return e.match(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)},w=r(184),g=function(e){var t=e.setCurrentPageId,r=e.userData,s=e.setUserData,m=(0,l.useState)(""),d=(0,a.Z)(m,2),f=d[0],b=d[1],g=(0,l.useState)(!1),N=(0,a.Z)(g,2),v=N[0],y=N[1],j=r.password.length<6||r.emailOrPhoneNumber.length<6||r.username.length<6||r.fullName.length<6,Z=function(){var e=(0,n.Z)(u().mark((function e(n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,x(r.username);case 3:if(e.sent){e.next=7;break}return b("This username is not available"),e.abrupt("return");case 7:return e.next=9,h(r.emailOrPhoneNumber);case 9:if(e.sent){e.next=13;break}return b("Another account is using the same email"),e.abrupt("return");case 13:if(p(r.emailOrPhoneNumber)){e.next=16;break}return b("Enter a valid email address."),e.abrupt("return");case 16:t((function(e){return e+1}));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=(0,l.useCallback)((function(){y((function(e){return!e}))}),[]);return(0,w.jsxs)("div",{className:"w-4/5 sm:w-1/2 lg:w-1/3",children:[(0,w.jsxs)("div",{className:"flex flex-col items-center w-full border bg-white",children:[(0,w.jsx)("div",{className:"flex justify-center w-full",children:(0,w.jsx)("img",{src:"/instagram-clone/images/instagram-logo.webp",className:"w-6/12 mt-6"})}),(0,w.jsx)("p",{className:"w-4/5 pb-4 text-center text-gray-400 font-semibold",children:"Sign up to see photos and videos from your friends"}),f?(0,w.jsx)("p",{className:"mb-4 w-4/5 text-sm text-red-500 text-center",children:f}):null,(0,w.jsxs)("form",{method:"POST",className:"flex flex-col items-center w-full",children:[(0,w.jsx)("input",{"aria-label":"Enter your email address or phone number",className:"text-sm w-4/5 py-5 px-4 h-2 border rounded mb-2 bg-[#fcfafa]",type:r.emailOrPhoneNumber.includes("@")?"email":"text",placeholder:"Mobile phone or email",value:r.emailOrPhoneNumber,onChange:function(e){return s((function(t){return(0,c.Z)((0,c.Z)({},t),{},{emailOrPhoneNumber:e.target.value})}))}}),(0,w.jsx)("input",{"aria-label":"Enter your full name",className:"text-sm w-4/5 py-5 px-4 h-2 border rounded mb-2 bg-[#fcfafa]",type:"text",placeholder:"Full name",value:r.fullName,onChange:function(e){return s((function(t){return(0,c.Z)((0,c.Z)({},t),{},{fullName:e.target.value})}))}}),(0,w.jsx)("input",{"aria-label":"Enter your username",className:"text-sm w-4/5 py-5 px-4 h-2 border rounded mb-2 bg-[#fcfafa]",type:"text",placeholder:"Username",value:r.username,onChange:function(e){return s((function(t){return(0,c.Z)((0,c.Z)({},t),{},{username:e.target.value})}))}}),(0,w.jsxs)("div",{className:"w-4/5 border rounded flex items-center bg-[#fcfafa] mb-4",children:[(0,w.jsx)("input",{"aria-label":"Enter your password",className:"text-sm w-full py-5 px-4 h-2 bg-[#fcfafa]",type:v?"text":"password",placeholder:"Password",value:r.password,onChange:function(e){return s((function(t){return(0,c.Z)((0,c.Z)({},t),{},{password:e.target.value})}))},autoComplete:"on"}),0!==r.password.length&&(0,w.jsx)("button",{type:"button",onClick:C,className:"w-1/5 h-1/2 text-sm bg-red font-medium rounded",children:v?"Hide":"Show"})]}),(0,w.jsx)("p",{className:"w-4/5 text-center text-gray-400 text-sm mb-4",children:"People who use our service may have uploaded your contact information to Instagram"}),(0,w.jsx)("button",{disabled:j,type:"button",className:"bg-blue-500 w-4/5 text-white rounded h-8 mb-8 font-bold ".concat(j&&"opacity-50"),onClick:Z,children:"Sign up"})]})]}),(0,w.jsx)("div",{className:"flex w-full border bg-white mt-4 py-2 justify-center",children:(0,w.jsxs)("p",{className:"text-sm",children:["Have an account?"," ",(0,w.jsx)(o.rU,{to:i.Z.LOGIN,className:"font-bold text-blue-400",children:"Sign in"})]})})]})},N=["January","February","March","April","May","June","July","August","September","October","November","December"],v=function(){for(var e=[],t=(new Date).getFullYear();t>1919;t--)e.push(t);return e},y=function(e){var t=[],r=0;switch(N.indexOf(e.month)){case 0:case 2:case 4:case 6:case 7:case 9:case 11:r=31;break;case 1:r=e.year%4?28:29;break;default:r=30}for(var n=1;n<=r;n++)t.push(n);return t},j=function(e){var t=e.setCurrentPageId,r=e.setUserData,n=(0,l.useState)({day:(new Date).getDate(),month:N[(new Date).getMonth()],year:(new Date).getFullYear()-1}),s=(0,a.Z)(n,2),u=s[0],m=s[1],d=(0,l.useMemo)((function(){return!((new Date).getFullYear()-u.year>5)}),[u]),f=(0,l.useCallback)((function(){r((function(e){return(0,c.Z)((0,c.Z)({},e),{},{birthdate:u})})),t((function(e){return e+1}))}),[u]),h=(0,l.useCallback)((function(){t((function(e){return e-1}))}),[]);return(0,w.jsxs)("div",{className:"w-4/5 sm:w-3/5 lg:w-1/3",children:[(0,w.jsxs)("div",{className:"flex flex-col items-center w-full border bg-white px-2",children:[(0,w.jsx)("div",{className:"flex justify-center w-full",children:(0,w.jsx)("img",{src:"/instagram-clone/images/cake.jpg",className:"w-5/12 mt-6"})}),(0,w.jsx)("p",{className:"text-black font-medium",children:"Add Your Birthday"}),(0,w.jsx)("p",{className:"mt-4 mb-3",children:"This won't be a part of your public profile."}),(0,w.jsxs)("form",{method:"POST",className:"flex flex-col items-center w-full mb-4",children:[(0,w.jsxs)("div",{className:"w-3/4 flex justify-center gap-2 mb-1",children:[(0,w.jsx)("select",{className:"border rounded text-sm p-1",value:u.month,onChange:function(e){return m((function(t){return(0,c.Z)((0,c.Z)({},t),{},{month:e.target.value})}))},children:N.map((function(e,t){return(0,w.jsx)("option",{children:e},t)}))}),(0,w.jsx)("select",{className:"border rounded text-sm p-1",value:u.day,onChange:function(e){return m((function(t){return(0,c.Z)((0,c.Z)({},t),{},{day:Number(e.target.value)})}))},children:y(u).map((function(e,t){return(0,w.jsx)("option",{children:e},t)}))}),(0,w.jsx)("select",{className:"border rounded text-sm p-1",value:u.year,onChange:function(e){return m((function(t){return(0,c.Z)((0,c.Z)({},t),{},{year:Number(e.target.value)})}))},children:v().map((function(e,t){return(0,w.jsx)("option",{children:e},t)}))})]}),(0,w.jsx)("p",{className:"w-4/5 text-center text-gray-400 text-sm mb-4",children:"You need to enter the date you were born"}),(0,w.jsx)("p",{className:"w-4/5 text-center text-gray-400 text-sm mb-4",children:"Use your own birthday, even if this account is for a business, a pet, or something else"}),(0,w.jsx)("button",{disabled:d,type:"button",className:"bg-blue-500 w-3/5 text-white rounded h-8 font-bold ".concat(d&&"opacity-50"),onClick:f,children:"Next"})]}),(0,w.jsx)("button",{className:"w-1/5 mb-6 font-bold text-blue-400",onClick:h,children:"Go Back"})]}),(0,w.jsx)("div",{className:"flex w-full border bg-white mt-4 py-2 justify-center",children:(0,w.jsxs)("p",{className:"text-sm",children:["Have an account?"," ",(0,w.jsx)(o.rU,{to:i.Z.LOGIN,className:"font-bold text-blue-400",children:"Sign in"})]})})]})},Z=r(8238),C=r(1743),k=r(410),P=r(6871),D=function(){var e=(0,C.T)(),t=(0,P.s0)(),r=(0,l.useState)(!1),s=(0,a.Z)(r,2),c=s[0],o=s[1],f=(0,l.useState)(0),h=(0,a.Z)(f,2),b=h[0],x=h[1],p=(0,l.useState)({username:"",fullName:"",emailOrPhoneNumber:"",password:"",birthdate:{}}),N=(0,a.Z)(p,2),v=N[0],y=N[1],D=function(){var r=(0,n.Z)(u().mark((function r(){var n,a;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,(0,Z.Xb)(d.I8,v.emailOrPhoneNumber,v.password);case 3:return n=r.sent,a={userId:n.user.uid,username:v.username.toLowerCase(),fullName:v.fullName,emailAddress:v.emailOrPhoneNumber.toLowerCase(),following:[],followers:[],dateCreated:(new Date).getTime(),birthdate:v.birthdate,phoneNumber:"",profileImage:"",posts:[],savedPosts:[]},r.next=7,(0,m.pl)((0,m.JU)(d.db,"users",n.user.uid),a);case 7:e((0,k.Cp)(a)),t(i.Z.DASHBOARD),r.next=15;break;case 11:r.prev=11,r.t0=r.catch(0),o(!0),console.log(r.t0);case 15:case"end":return r.stop()}}),r,null,[[0,11]])})));return function(){return r.apply(this,arguments)}}();(0,l.useEffect)((function(){2===b&&D()}),[b]);return c?(0,w.jsx)(P.Fg,{to:i.Z.NOT_FOUND}):(0,w.jsx)("div",{className:"h-screen w-screen flex justify-center items-center bg-[#FAFAFA]",children:function(){switch(b){case 0:return(0,w.jsx)(g,{setCurrentPageId:x,userData:v,setUserData:y});case 1:return(0,w.jsx)(j,{setCurrentPageId:x,setUserData:y});default:return null}}()})}}}]);
//# sourceMappingURL=453.83f13553.chunk.js.map