"use strict";(self.webpackChunkinstagram_clone=self.webpackChunkinstagram_clone||[]).push([[646],{3646:function(e,t,r){r.r(t),r.d(t,{default:function(){return Z}});var n=r(5861),a=r(885),s=r(7757),u=r.n(s),l=r(2791),c=r(1413),o=r(3504),i=r(83),m=r(6724),d=r(9329),f=function(){var e=(0,n.Z)(u().mark((function e(t){var r,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.PL)((0,m.hJ)(d.db,"users"));case 2:return r=e.sent,n=!0,r.forEach((function(e){e.data().emailAddress!==t||(n=!1)})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=f,x=function(){var e=(0,n.Z)(u().mark((function e(t){var r,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.PL)((0,m.hJ)(d.db,"users"));case 2:return r=e.sent,n=!0,r.forEach((function(e){e.data().username!==t||(n=!1)})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=x,p=r(184),w=function(e){var t=e.setCurrentPageId,r=e.userData,s=e.setUserData,m=(0,l.useState)(""),d=(0,a.Z)(m,2),f=d[0],x=d[1],w=(0,l.useState)(!1),g=(0,a.Z)(w,2),N=g[0],v=g[1],y=r.password.length<6||r.emailOrPhoneNumber.length<6||r.username.length<6||r.fullName.length<6,j=function(){var e=(0,n.Z)(u().mark((function e(n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,b(r.username);case 3:if(e.sent){e.next=7;break}return x("This username is not available"),e.abrupt("return");case 7:return e.next=9,h(r.emailOrPhoneNumber);case 9:if(e.sent){e.next=13;break}return x("Another account is using the same email"),e.abrupt("return");case 13:if(r.emailOrPhoneNumber.match(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)){e.next=17;break}return x("Enter a valid email address."),e.abrupt("return");case 17:t((function(e){return e+1}));case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,p.jsxs)("div",{className:"w-4/5 sm:w-1/2 lg:w-1/3",children:[(0,p.jsxs)("div",{className:"flex flex-col items-center w-full border bg-white",children:[(0,p.jsx)("div",{className:"flex justify-center w-full",children:(0,p.jsx)("img",{src:"/images/instagram-logo.webp",className:"w-6/12 mt-6"})}),(0,p.jsx)("p",{className:"w-4/5 pb-4 text-center text-gray-400 font-semibold",children:"Sign up to see photos and videos from your friends"}),f?(0,p.jsx)("p",{className:"mb-4 w-4/5 text-sm text-red-500 text-center",children:f}):null,(0,p.jsxs)("form",{method:"POST",className:"flex flex-col items-center w-full",children:[(0,p.jsx)("input",{"aria-label":"Enter your email address or phone number",className:"text-sm w-4/5 py-5 px-4 h-2 border rounded mb-2 bg-[#fcfafa]",type:r.emailOrPhoneNumber.includes("@")?"email":"text",placeholder:"Mobile phone or email",value:r.emailOrPhoneNumber,onChange:function(e){return s((function(t){return(0,c.Z)((0,c.Z)({},t),{},{emailOrPhoneNumber:e.target.value})}))}}),(0,p.jsx)("input",{"aria-label":"Enter your full name",className:"text-sm w-4/5 py-5 px-4 h-2 border rounded mb-2 bg-[#fcfafa]",type:"text",placeholder:"Full name",value:r.fullName,onChange:function(e){return s((function(t){return(0,c.Z)((0,c.Z)({},t),{},{fullName:e.target.value})}))}}),(0,p.jsx)("input",{"aria-label":"Enter your username",className:"text-sm w-4/5 py-5 px-4 h-2 border rounded mb-2 bg-[#fcfafa]",type:"text",placeholder:"Username",value:r.username,onChange:function(e){return s((function(t){return(0,c.Z)((0,c.Z)({},t),{},{username:e.target.value})}))}}),(0,p.jsxs)("div",{className:"w-4/5 border rounded flex items-center bg-[#fcfafa] mb-4",children:[(0,p.jsx)("input",{"aria-label":"Enter your password",className:"text-sm w-full py-5 px-4 h-2 bg-[#fcfafa]",type:N?"text":"password",placeholder:"Password",value:r.password,onChange:function(e){return s((function(t){return(0,c.Z)((0,c.Z)({},t),{},{password:e.target.value})}))},autoComplete:"on"}),0!==r.password.length&&(0,p.jsx)("button",{type:"button",onClick:function(){return v((function(e){return!e}))},className:"w-1/5 h-1/2 text-sm bg-red font-medium rounded",children:N?"Hide":"Show"})]}),(0,p.jsx)("p",{className:"w-4/5 text-center text-gray-400 text-sm mb-4",children:"People who use our service may have uploaded your contact information to Instagram"}),(0,p.jsx)("button",{disabled:y,type:"button",className:"\n                            bg-blue-500 w-4/5 text-white rounded h-8 mb-8 font-bold \n                            ".concat(y&&"opacity-50","\n                        "),onClick:function(e){return j(e)},children:"Sign up"})]})]}),(0,p.jsx)("div",{className:"flex w-full border bg-white mt-4 py-2 justify-center",children:(0,p.jsxs)("p",{className:"text-sm",children:["Have an account?"," ",(0,p.jsx)(o.rU,{to:i.Z.LOGIN,className:"font-bold text-blue-400",children:"Sign in"})]})})]})},g=function(e){var t=e.setCurrentPageId,r=e.setUserData,n=["January","February","March","April","May","June","July","August","September","October","November","December"],s=(0,l.useState)({day:(new Date).getDate(),month:n[(new Date).getMonth()],year:(new Date).getFullYear()-1}),u=(0,a.Z)(s,2),m=u[0],d=u[1],f=(0,l.useMemo)((function(){return!((new Date).getFullYear()-m.year>5)}),[m]);return(0,p.jsxs)("div",{className:"w-4/5 sm:w-3/5 lg:w-1/3",children:[(0,p.jsxs)("div",{className:"flex flex-col items-center w-full border bg-white px-2",children:[(0,p.jsx)("div",{className:"flex justify-center w-full",children:(0,p.jsx)("img",{src:"/images/cake.jpg",className:"w-5/12 mt-6"})}),(0,p.jsx)("p",{className:"text-black font-medium",children:"Add Your Birthday"}),(0,p.jsx)("p",{className:"mt-4 mb-3",children:"This won't be a part of your public profile."}),(0,p.jsxs)("form",{method:"POST",className:"flex flex-col items-center w-full mb-4",children:[(0,p.jsxs)("div",{className:"w-3/4 flex justify-center gap-2 mb-1",children:[(0,p.jsx)("select",{className:"border rounded text-sm p-1",value:m.month,onChange:function(e){return d((function(t){return(0,c.Z)((0,c.Z)({},t),{},{month:e.target.value})}))},children:n.map((function(e,t){return(0,p.jsx)("option",{children:e},t)}))}),(0,p.jsx)("select",{className:"border rounded text-sm p-1",value:m.day,onChange:function(e){return d((function(t){return(0,c.Z)((0,c.Z)({},t),{},{day:Number(e.target.value)})}))},children:function(){var e=[],t=0;switch(n.indexOf(m.month)){case 0:case 2:case 4:case 6:case 7:case 9:case 11:t=31;break;case 1:t=m.year%4?28:29;break;default:t=30}for(var r=1;r<=t;r++)e.push(r);return e}().map((function(e,t){return(0,p.jsx)("option",{children:e},t)}))}),(0,p.jsx)("select",{className:"border rounded text-sm p-1",value:m.year,onChange:function(e){return d((function(t){return(0,c.Z)((0,c.Z)({},t),{},{year:Number(e.target.value)})}))},children:function(){for(var e=[],t=(new Date).getFullYear();t>1919;t--)e.push(t);return e}().map((function(e,t){return(0,p.jsx)("option",{children:e},t)}))})]}),(0,p.jsx)("p",{className:"w-4/5 text-center text-gray-400 text-sm mb-4",children:"You need to enter the date you were born"}),(0,p.jsx)("p",{className:"w-4/5 text-center text-gray-400 text-sm mb-4",children:"Use your own birthday, even if this account is for a business, a pet, or something else"}),(0,p.jsx)("button",{disabled:f,type:"button",className:"\n                            bg-blue-500 w-3/5 text-white rounded h-8 font-bold \n                            ".concat(f&&"opacity-50","\n                        "),onClick:function(){r((function(e){return(0,c.Z)((0,c.Z)({},e),{},{birthdate:m})})),t((function(e){return e+1}))},children:"Next"})]}),(0,p.jsx)("button",{className:"w-1/5 mb-6 font-bold text-blue-400",onClick:function(){return t((function(e){return e-1}))},children:"Go Back"})]}),(0,p.jsx)("div",{className:"flex w-full border bg-white mt-4 py-2 justify-center",children:(0,p.jsxs)("p",{className:"text-sm",children:["Have an account?"," ",(0,p.jsx)(o.rU,{to:i.Z.LOGIN,className:"font-bold text-blue-400",children:"Sign in"})]})})]})},N=r(8238),v=r(1743),y=r(2972),j=r(6871),Z=function(){var e=(0,v.T)(),t=(0,j.s0)(),r=(0,l.useState)(!1),s=(0,a.Z)(r,2),c=s[0],o=s[1],f=(0,l.useState)(0),h=(0,a.Z)(f,2),x=h[0],b=h[1],Z=(0,l.useState)({username:"",fullName:"",emailOrPhoneNumber:"",password:"",birthdate:{}}),C=(0,a.Z)(Z,2),k=C[0],P=C[1],D=function(){var r=(0,n.Z)(u().mark((function r(){var n,a;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,(0,N.Xb)(d.I8,k.emailOrPhoneNumber,k.password);case 3:return n=r.sent,a={userId:n.user.uid,username:k.username.toLowerCase(),fullName:k.fullName,emailAddress:k.emailOrPhoneNumber.toLowerCase(),following:[],followers:[],dateCreated:(new Date).getTime(),birthdate:k.birthdate,phoneNumber:"",profileImage:"",posts:[],savedPosts:[]},r.next=7,(0,m.pl)((0,m.JU)(d.db,"users",n.user.uid),a);case 7:e((0,y.Cp)(a)),t(i.Z.DASHBOARD),r.next=15;break;case 11:r.prev=11,r.t0=r.catch(0),o(!0),console.log(r.t0);case 15:case"end":return r.stop()}}),r,null,[[0,11]])})));return function(){return r.apply(this,arguments)}}();(0,l.useEffect)((function(){2===x&&D()}),[x]);return c?(0,p.jsx)(j.Fg,{to:i.Z.NOT_FOUND}):(0,p.jsx)("div",{className:"h-screen w-screen flex justify-center items-center bg-[#FAFAFA]",children:function(){switch(x){case 0:return(0,p.jsx)(w,{setCurrentPageId:b,userData:k,setUserData:P});case 1:return(0,p.jsx)(g,{setCurrentPageId:b,setUserData:P});default:return null}}()})}}}]);
//# sourceMappingURL=646.fdeaec28.chunk.js.map